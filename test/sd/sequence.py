from random import randint

RCA = randint(0, 1 << 16)

inputs  = ["start", "cmd_done",       "resp"      , "read_done", "check_status", "write_done", "otp_ready"]
ivalues = [
          [   1,        0,                       0,      0,            0,              1,           0     ], #1  IDLE   -> CMD55
          [   0,        1,                       0,      0,            0,              1,           0     ], #2  CMD55  -> IDLE

          [   1,        0,                       0,      0,            0,              1,           0     ], #3  IDLE   -> CMD55
          [   0,        1,                  1 << 5,      0,            0,              1,           0     ], #4  CMD55  -> ACMD41
          [   0,        1,                 1 << 31,      0,            0,              1,           0     ], #5  ACMD41 -> IDLE

          [   1,        0,                       0,      0,            0,              1,           0     ], #6  IDLE   -> CMD55
          [   0,        1,                  1 << 5,      0,            0,              1,           0     ], #7  CMD55  -> ACMD41
          [   0,        1,   (1 << 21) | (1 << 20),      0,            0,              1,           0     ], #8  ACMD41 -> CMD55
          [   0,        1,                  1 << 5,      0,            0,              1,           0     ], #9  CMD55  -> ACMD41
          [   0,        1,   (1 << 31) | (1 << 20),      0,            0,              1,           0     ], #10 ACMD41 -> CMD2
          [   0,        1,                       0,      0,            0,              1,           0     ], #11 CMD2   -> CMD3
          [   0,        1,               RCA << 16,      0,            0,              1,           0     ], #12 CMD3   -> CMD9
          [   0,        1,                       0,      0,            0,              1,           0     ], #13 CMD9   -> CMD7
          [   0,        1,                       0,      0,            0,              1,           0     ], #14 CMD7   -> CMD55
          [   0,        1,                       0,      0,            0,              1,           0     ], #15 CMD55  -> IDLE

          [   1,        0,                       0,      0,            0,              1,           0     ], #16 IDLE   -> CMD55
          [   0,        1,                  1 << 5,      0,            0,              1,           0     ], #17 CMD55  -> ACMD41
          [   0,        1,   (1 << 31) | (1 << 21),      0,            0,              1,           0     ], #18 ACMD41 -> CMD2
          [   0,        1,                       0,      0,            0,              1,           0     ], #19 CMD2   -> CMD3
          [   0,        1,               RCA << 16,      0,            0,              1,           0     ], #20 CMD3   -> CMD9
          [   0,        1,                       0,      0,            0,              1,           0     ], #21 CMD9   -> CMD7
          [   0,        1,                       0,      0,            0,              1,           0     ], #22 CMD7   -> CMD55
          [   0,        1,                  1 << 5,      0,            0,              1,           0     ], #23 CMD55  -> ACMD6
          [   0,        1,                       0,      0,            0,              1,           0     ], #24 ACMD6  -> IDLE

          [   1,        0,                       0,      0,            0,              1,           0     ], #25 IDLE   -> CMD55
          [   0,        1,                  1 << 5,      0,            0,              1,           0     ], #26 CMD55  -> ACMD41
          [   0,        1,   (1 << 31) | (3 << 20),      0,            0,              1,           0     ], #27 ACMD41 -> CMD2
          [   0,        1,                       0,      0,            0,              1,           0     ], #28 CMD2   -> CMD3
          [   0,        1,               RCA << 16,      0,            0,              1,           0     ], #29 CMD3   -> CMD9
          [   0,        1,   (9 << 72) | (1 << 39),      0,            0,              1,           0     ], #30 CMD9   -> CMD7
          [   0,        1,                       0,      0,            0,              1,           0     ], #31 CMD7   -> CMD55
          [   0,        1,                  1 << 5,      0,            0,              1,           0     ], #32 CMD55  -> ACMD6
          [   0,        1,                  4 << 9,      0,            0,              1,           0     ], #33 ACMD6  -> CMD6
          [   0,        1,                       0,      0,            0,              1,           0     ], #34 CMD6   -> CMD13
          [   0,        1,                  5 << 9,      0,            0,              0,           0     ], #35 CMD13  -> CMD13
          [   0,        1,                  5 << 9,      0,            0,              1,           0     ], #36 CMD13  -> CMD13
          [   0,        1,                  4 << 9,      0,            0,              1,           0     ], #37 CMD13  -> CMD13
          [   0,        1,     (4 << 9) | (1 << 8),      0,            0,              1,           0     ], #38 CMD13  -> CMD18
          [   0,        1,                       0,      0,            0,              0,           0     ], #39 CMD18  -> READ
          [   0,        0,                       0,      0,            0,              1,           0     ], #40 READ   -> CMD12
          [   0,        1,                       0,      0,            0,              1,           0     ], #41 CMD12  -> CMD13

          [   0,        1,     (4 << 9) | (1 << 8),      0,            0,              1,           0     ], #42 CMD13  -> CMD18
          [   0,        1,                       0,      0,            0,              0,           0     ], #43 CMD18  -> READ
          [   0,        0,                       0,      1,            0,              0,           0     ], #44 READ   -> CMD12
          [   0,        1,                       0,      1,            0,              0,           0     ], #45 CMD12  -> CMD55
          [   0,        1,                  1 << 5,      1,            0,              0,           0     ], #46 CMD55  -> ACMD23
          [   0,        1,                       0,      1,            0,              0,           0     ], #47 ACMD23 -> OTP
          [   0,        0,                       0,      1,            0,              0,           1     ], #48 OTP    -> CMD25
          [   0,        1,                       0,      1,            0,              0,           0     ], #49 CMD25  -> WRITE

          [   0,        0,                       0,      0,            1,              0,           0     ], #50 WRITE  -> CMD13
          [   0,        1,     (6 << 9) | (1 << 8),      0,            0,              0,           0     ], #51 CMD13  -> WRITE

          [   0,        0,                       0,      0,            1,              0,           0     ], #52 WRITE  -> CMD13
          [   0,        1,     (6 << 9) | (1 << 8),      0,            0,              0,           0     ], #53 CMD13  -> WRITE

          [   0,        0,                       0,      0,            1,              0,           0     ], #54 WRITE  -> CMD13
          [   0,        1,     (6 << 9) | (1 << 8),      0,            0,              0,           0     ], #55 CMD13  -> WRITE

          [   0,        0,                       0,      0,            1,              0,           0     ], #56 WRITE  -> CMD13
          [   0,        1,     (6 << 9) | (1 << 8),      0,            0,              0,           0     ], #57 CMD13  -> WRITE

          [   0,        0,                       0,      0,            1,              0,           0     ], #58 WRITE  -> CMD13
          [   0,        1,     (6 << 9) | (1 << 8),      0,            0,              0,           0     ], #59 CMD13  -> WRITE

          [   0,        0,                       0,      0,            1,              0,           0     ], #60 WRITE  -> CMD13
          [   0,        1,     (6 << 9) | (1 << 8),      0,            0,              0,           0     ], #61 CMD13  -> WRITE

          [   0,        0,                       0,      0,            1,              0,           0     ], #62 WRITE  -> CMD13
          [   0,        1,     (6 << 9) | (1 << 8),      0,            0,              0,           0     ], #63 CMD13  -> WRITE

          [   0,        0,                       0,      0,            1,              0,           0     ], #64 WRITE  -> CMD13
          [   0,        1,     (6 << 9) | (1 << 8),      0,            0,              0,           0     ], #65 CMD13  -> WRITE

          [   0,        0,                       0,      0,            0,              1,           0     ], #66 WRITE  -> CMD12
          [   0,        1,                       0,      0,            0,              1,           0     ], #67 CMD12  -> CMD13
          [   0,        1,                  7 << 9,      0,            0,              1,           0     ], #68 CMD13  -> CMD13
          [   0,        1,     (4 << 9) | (1 << 8),      0,            0,              1,           0     ], #69 CMD13  -> CMD15
          [   0,        1,                       0,      0,            0,              1,           0     ]  #70 CMD15  -> IDLE
]

outputs = ["sel_clk", "gen_otp", "new_otp", "start_cmd", "index",          "arg"         , "status_d", "start_d", "fail", "success"]
ovalues = [
          [    0,         0,         0,          1,        55,              (1 << 15) - 1,      0,         0,        0,       0    ], # IDLE   -> CMD55
          [    0,         0,         1,          0,         0,              (1 << 32) - 1,      0,         0,        1,       0    ], # CMD55  -> IDLE

          [    0,         0,         0,          1,        55,              (1 << 15) - 1,      0,         0,        0,       0    ], # IDLE   -> CMD55
          [    0,         0,         0,          1,        41,      (1 << 31) | (3 << 20),      0,         0,        0,       0    ], # CMD55  -> ACMD41
          [    0,         0,         1,          0,         0,              (1 << 32) - 1,      0,         0,        1,       0    ], # ACMD41 -> IDLE

          [    0,         0,         0,          1,        55,              (1 << 15) - 1,      0,         0,        0,       0    ], # IDLE   -> CMD55
          [    0,         0,         0,          1,        41,      (1 << 31) | (3 << 20),      0,         0,        0,       0    ], # CMD55  -> ACMD41
          [    0,         0,         0,          1,        55,              (1 << 15) - 1,      0,         0,        0,       0    ], # ACMD41 -> CMD55
          [    0,         0,         0,          1,        41,      (1 << 31) | (3 << 20),      0,         0,        0,       0    ], # CMD55  -> ACMD41
          [    0,         0,         0,          1,         2,              (1 << 32) - 1,      0,         0,        0,       0    ], # ACMD41 -> CMD2
          [    0,         0,         0,          1,         3,              (1 << 32) - 1,      0,         0,        0,       0    ], # CMD2   -> CMD3
          [    0,         0,         0,          1,         9,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD3   -> CMD9
          [    0,         0,         0,          1,         7,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD9   -> CMD7
          [    0,         0,         0,          1,        55,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD7   -> CMD55
          [    0,         0,         1,          0,         0,              (1 << 32) - 1,      0,         0,        1,       0    ], # CMD55  -> IDLE

          [    0,         0,         0,          1,        55,              (1 << 15) - 1,      0,         0,        0,       0    ], # IDLE   -> CMD55
          [    0,         0,         0,          1,        41,      (1 << 31) | (3 << 20),      0,         0,        0,       0    ], # CMD55  -> ACMD41
          [    0,         0,         0,          1,         2,              (1 << 32) - 1,      0,         0,        0,       0    ], # ACMD41 -> CMD2
          [    0,         0,         0,          1,         3,              (1 << 32) - 1,      0,         0,        0,       0    ], # CMD2   -> CMD3
          [    0,         0,         0,          1,         9,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD3   -> CMD9
          [    0,         0,         0,          1,         7,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD9   -> CMD7
          [    0,         0,         0,          1,        55,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD7   -> CMD55
          [    0,         0,         0,          1,         6,              (1 << 32) - 2,      0,         0,        0,       0    ], # CMD55  -> ACMD6
          [    0,         0,         1,          0,         0,              (1 << 32) - 1,      0,         0,        1,       0    ], # ACMD6  -> IDLE

          [    0,         0,         0,          1,        55,              (1 << 15) - 1,      0,         0,        0,       0    ], # IDLE   -> CMD55
          [    0,         0,         0,          1,        41,      (1 << 31) | (3 << 20),      0,         0,        0,       0    ], # CMD55  -> ACMD41
          [    0,         0,         0,          1,         2,              (1 << 32) - 1,      0,         0,        0,       0    ], # ACMD41 -> CMD2
          [    0,         0,         0,          1,         3,              (1 << 32) - 1,      0,         0,        0,       0    ], # CMD2   -> CMD3
          [    0,         0,         0,          1,         9,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD3   -> CMD9
          [    0,         0,         0,          1,         7,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD9   -> CMD7
          [    0,         0,         0,          1,        55,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD7   -> CMD55
          [    0,         0,         0,          1,         6,              (1 << 32) - 2,      0,         0,        0,       0    ], # CMD55  -> ACMD6
          [    0,         1,         0,          1,         6,              (1 << 31) + 1,      1,         0,        0,       0    ], # ACMD6  -> CMD6
          [    0,         0,         0,          1,        13,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD6   -> CMD13
          [    0,         0,         0,          1,        13,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD13  -> CMD13
          [    0,         0,         0,          1,        13,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD13  -> CMD13
          [    0,         0,         0,          1,        13,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD13  -> CMD13
          [    1,         0,         0,          1,        18,                          0,      0,         1,        0,       0    ], # CMD13  -> CMD18
          [    1,         0,         0,          0,        19,              (1 << 32) - 1,      0,         0,        0,       0    ], # CMD18  -> READ
          [    1,         0,         0,          1,        12,              (1 << 32) - 1,      0,         0,        0,       0    ], # READ   -> CMD12
          [    1,         0,         0,          1,        13,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD12  -> CMD13

          [    1,         0,         0,          1,        18,                          0,      0,         1,        0,       0    ], # CMD13  -> CMD18
          [    1,         0,         0,          0,        19,              (1 << 32) - 1,      0,         0,        0,       0    ], # CMD18  -> READ
          [    1,         0,         0,          1,        12,              (1 << 32) - 1,      0,         0,        0,       0    ], # READ   -> CMD12
          [    1,         0,         0,          1,        55,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD12  -> CMD55
          [    1,         0,         0,          1,        23,  ( ((1<<9)-1) << 23 ) | 8 ,      0,         0,        0,       0    ], # CMD55  -> ACMD23
          [    1,         0,         0,          0,        20,              (1 << 32) - 1,      0,         0,        0,       0    ], # ACMD23 -> OTP
          [    1,         0,         0,          1,        25,                          0,      0,         0,        0,       0    ], # OTP    -> CMD25
          [    1,         0,         0,          0,        21,              (1 << 32) - 1,      0,         1,        0,       0    ], # CMD25  -> WRITE

          [    1,         0,         0,          1,        13,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # WRITE  -> CMD13
          [    1,         0,         0,          0,        21,              (1 << 32) - 1,      0,         1,        0,       0    ], # CMD13  -> WRITE

          [    1,         0,         0,          1,        13,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # WRITE  -> CMD13
          [    1,         0,         0,          0,        21,              (1 << 32) - 1,      0,         1,        0,       0    ], # CMD13  -> WRITE

          [    1,         0,         0,          1,        13,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # WRITE  -> CMD13
          [    1,         0,         0,          0,        21,              (1 << 32) - 1,      0,         1,        0,       0    ], # CMD13  -> WRITE

          [    1,         0,         0,          1,        13,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # WRITE  -> CMD13
          [    1,         0,         0,          0,        21,              (1 << 32) - 1,      0,         1,        0,       0    ], # CMD13  -> WRITE

          [    1,         0,         0,          1,        13,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # WRITE  -> CMD13
          [    1,         0,         0,          0,        21,              (1 << 32) - 1,      0,         1,        0,       0    ], # CMD13  -> WRITE

          [    1,         0,         0,          1,        13,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # WRITE  -> CMD13
          [    1,         0,         0,          0,        21,              (1 << 32) - 1,      0,         1,        0,       0    ], # CMD13  -> WRITE

          [    1,         0,         0,          1,        13,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # WRITE  -> CMD13
          [    1,         0,         0,          0,        21,              (1 << 32) - 1,      0,         1,        0,       0    ], # CMD13  -> WRITE

          [    1,         0,         0,          1,        13,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # WRITE  -> CMD13
          [    1,         0,         0,          0,        21,              (1 << 32) - 1,      0,         1,        0,       0    ], # CMD13  -> WRITE

          [    1,         1,         0,          1,        12,              (1 << 32) - 1,      0,         0,        0,       0    ], # WRITE  -> CMD12
          [    1,         0,         0,          1,        13,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD12  -> CMD13
          [    1,         0,         0,          1,        13,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD13  -> CMD13
          [    1,         0,         0,          1,        15,  (RCA << 16) | ((1<<15)-1),      0,         0,        0,       0    ], # CMD13  -> CMD15
          [    0,         0,         1,          0,         0,              (1 << 32) - 1,      0,         0,        0,       1    ]  # CMD15  -> IDLE
]
